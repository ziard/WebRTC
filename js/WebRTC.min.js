(function(t,e,i,o){"use strict";const n="WebRTC",s="plugin_"+n,a={resolution:null,fixWidth:null,front:!1,audio:!1},r={QVGA:{width:{exact:320},height:{exact:240}},VGA:{width:{exact:640},height:{exact:480}},HD:{width:{exact:1280},height:{exact:720}},FullHD:{width:{exact:1920},height:{exact:1080}},fourK:{width:{exact:4096},height:{exact:2160}},eightK:{width:{exact:7680},height:{exact:4320}}},h='<video id="video" autoplay playsinline></video>',c=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,d=function(t){console.error("navigator.MediaDevices.getUserMedia error: ",t.message,t.name)},u=function(t){const n=i.getElementById("video");e.stream=t,navigator.mediaDevices?n.srcObject=t:e.webkitURL?n.src=e.webkitURL.createObjectURL(t):n.mozSrcObject!==o?n.mozSrcObject=t:n.src=t};var f=function(e){this.options=t.extend({},a)};f.prototype={init:function(e){t.extend(this.options,e),this.element.html(h),e.fixWidth&&(this.element.css("width",e.fixWidth),this.element.find("video").each(function(){this.style.setProperty("width","100%","important")}))},start:function(){const t={video:{facingMode:this.options.front?"user":"environment"},audio:this.options.audio};return this.options.resolution&&(t.video.width=r[this.options.resolution].width,t.video.height=r[this.options.resolution].height),!!c&&(navigator.mediaDevices.getUserMedia(t).then(u).catch(d),!0)},stop:function(){e.stream&&e.stream.getTracks().forEach(function(t){t.stop()})},switch:function(){this.stop(),this.options.front=!this.options.front,this.start()},pause:function(){this.element.find("video").get(0).pause()},resume:function(){this.element.find("video").get(0).play()},capture:function(t,e,i){const o=this.element.find("video").get(0);t.width=e||o.videoWidth,t.height=i||o.videoHeight,t.getContext("2d").drawImage(o,0,0,t.width,t.height)},zoom:function(t){if(e.stream){const i=e.stream.getTracks()[0],o=i.getCapabilities();if(!("zoom"in o))return Promise.reject("Zoom is not supported by "+i.label);i.applyConstraints({advanced:[{zoom:t}]})}},zoomBar:function(){}},t.fn[n]=function(e){var i,o;if(this.data(s)instanceof f||this.data(s,new f(this)),o=this.data(s),o.element=this,void 0===e||"object"==typeof e){if("function"==typeof o.init)return o.init(e),this}else{if("string"==typeof e&&!e.startsWith("_")&&"function"==typeof o[e])return i=Array.prototype.slice.call(arguments,1),o[e].apply(o,i);t.error("Method "+e+" does not exist on jQuery."+n)}}})(jQuery,window,document);